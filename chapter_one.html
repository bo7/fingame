<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter I: The Corrupted Algorithm</title>
    <link rel="stylesheet" href="style.css"> </head>
<body>
    <div id="steamContainer"></div>

    <div class="game-container">
        <div class="main-panel">
            <h1 class="title">The Data Pipeline Conspiracy</h1>
            <p class="subtitle">Chapter I: The Corrupted Algorithm</p>

            <div class="chapter-header">
                <h2 style="color: #da70d6; margin: 0;">Location: Probability Plaza</h2>
                <small style="color: #daa520;">The heart of New Cognitia's mathematical district</small>
            </div>

            <div class="scene-image" id="sceneImage" style="background-image: url('images/steampunk_plaza_1.jpg');">
                <div class="gear-animation">âš™ï¸</div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="storyProgress" style="width: 0%;"></div>
            </div>

            <div class="scene-content" id="storyContainer">
                <div id="narrativeText">
                    <div class="typewriter">Welcome, Archmage Finja, to your greatest mathematical adventure...</div>
                </div>
            </div>

            <div class="puzzle-box hidden" id="puzzleBox">
                <div class="puzzle-title">âˆ The Limit Lock Challenge</div>
                <p id="puzzleText"></p>
                <input type="text" class="puzzle-input" id="puzzleInput" placeholder="Enter the limit value (fraction or decimal)...">
                <button class="action-btn" onclick="checkPuzzle()" style="margin-top: 15px; width: 100%;">ğŸ”‘ Submit Answer</button>
                <div id="hintSection" class="hidden" style="margin-top: 15px; padding: 10px; background: rgba(255, 215, 0, 0.1); border-radius: 5px;">
                    <strong style="color: #ffd700;">ğŸ’¡ Team Hint:</strong>
                    <span id="hintText"></span>
                </div>
            </div>

            <div class="actions" id="actionButtons">
                <button class="action-btn" onclick="beginChapter()">ğŸš€ Begin Chapter I</button>
                <button class="action-btn" onclick="showTeamStatus()">ğŸ‘¥ Check Team Status</button>
                <button class="action-btn" onclick="examineEnvironment()">ğŸ” Examine Plaza</button>
                <button class="action-btn" onclick="showInventory()">ğŸ’ Check Equipment</button>
            </div>
        </div>

        <div class="sidebar">
            <div class="inventory">
                <div class="inventory-title">ğŸ’ Finja's Mathematical Arsenal</div>
                <div id="inventoryList">
                    â€¢ <strong>Analytical Engine Tablet</strong> - Processes complex calculations<br>
                    â€¢ <strong>Theorem Compass</strong> - Points toward mathematical truth<br>
                    â€¢ <strong>Data Crystal Resonator</strong> - Detects algorithm corruption<br>
                    â€¢ <strong>Team Communication Device</strong> - Connects with party members<br>
                    â€¢ <strong>Euler's Memorial Badge</strong> - Grants access to sacred mathematics
                </div>
            </div>

            <div class="character-panel">
                <h3 style="color: #ffd700; margin-bottom: 15px;">ğŸ­ Your Elite Mathematical Team</h3>

                <div class="character" onclick="showCharacterInfo('finja')">
                    <div class="character-name">ğŸ‘‘ Finja</div>
                    <div class="character-class">Archmage of Mathematics</div>
                    <div class="character-status">Ready to lead the expedition</div>
                    <div class="health-bar"><div class="health-fill" style="width: 100%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('thomas')">
                    <div class="character-name">ğŸ”® Thomas</div>
                    <div class="character-class">Data Enchanter</div>
                    <div class="character-status">Studying corruption patterns</div>
                    <div class="health-bar"><div class="health-fill" style="width: 95%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('marvin')">
                    <div class="character-name">ğŸµ Marvin</div>
                    <div class="character-class">Algorithm Bard</div>
                    <div class="character-status">Composing motivational verses</div>
                    <div class="health-bar"><div class="health-fill" style="width: 98%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('sven')">
                    <div class="character-name">ğŸ›¡ï¸ Sven</div>
                    <div class="character-class">Security Paladin</div>
                    <div class="character-status">Maintaining defensive protocols</div>
                    <div class="health-bar"><div class="health-fill" style="width: 100%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('dirk')">
                    <div class="character-name">âš”ï¸ Dirk</div>
                    <div class="character-class">Firewall Guardian</div>
                    <div class="character-status">Scanning for threats</div>
                    <div class="health-bar"><div class="health-fill" style="width: 92%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('hiromi')">
                    <div class="character-name">ğŸ¥· Hiromi</div>
                    <div class="character-class">System Infiltrator</div>
                    <div class="character-status">Reconnaissance complete</div>
                    <div class="health-bar"><div class="health-fill" style="width: 97%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('alex')">
                    <div class="character-name">ğŸ§™ Alex</div>
                    <div class="character-class">Machine Learning Sage</div>
                    <div class="character-status">Analyzing data patterns</div>
                    <div class="health-bar"><div class="health-fill" style="width: 94%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('sebastian')">
                    <div class="character-name">ğŸª“ Sebastian</div>
                    <div class="character-class">Database Warrior</div>
                    <div class="character-status">Defending data integrity</div>
                    <div class="health-bar"><div class="health-fill" style="width: 96%;"></div></div>
                </div>

                <div class="character" onclick="showCharacterInfo('moritz')">
                    <div class="character-name">ğŸ¹ Moritz</div>
                    <div class="character-class">Network Ranger</div>
                    <div class="character-status">Scouting network pathways</div>
                    <div class="health-bar"><div class="health-fill" style="width: 99%;"></div></div>
                </div>
            </div>

            <div style="background: rgba(139, 69, 19, 0.2); padding: 18px; border-radius: 8px;">
                <div style="color: #ffd700; font-weight: bold; margin-bottom: 12px;">ğŸ“Š Chapter Progress</div>
                <div id="chapterStatus">
                    <div>ğŸ—ºï¸ Location: Probability Plaza</div>
                    <div>ğŸ¯ Objective: Investigate corruption</div>
                    <div>ğŸ” Clues Found: 0/3</div>
                    <div>ğŸ’ Data Shards: 0/1</div>
                    <div style="color: #90EE90;">âœ¨ Team Morale: Excellent!</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            storyPhase: 0,
            cluesFound: 0,
            hintsUsed: 0,
            puzzleSolved: false,
            chapterComplete: false
        };

        const storyPhases = [
            {
                title: "ğŸŒ… Dawn in New Cognitia",
                text: "The morning steam rises from the cobblestone streets of Probability Plaza as brass gears tick in perfect mathematical harmony. But today... something is wrong.",
                action: "Continue..."
            },
            {
                title: "âš ï¸ The Great Data Engine Falters",
                text: "The massive Data Engine that powers New Cognitia's computational heart begins to stutter. Mathematical equations that once flowed like rivers now corrupt and fragment.",
                action: "Investigate the disturbance"
            },
            {
                title: "ğŸ­ Your Team Assembles",
                text: "As news of the crisis spreads, your trusted companions gather in the plaza. Thomas's data crystals flicker with concern, while Marvin strums his algorithmic lute nervously.",
                action: "Address your team"
            },
            {
                title: "ğŸ”® The Oracle's Message",
                text: "The Oracle of Algorithms materializes in a swirl of mathematical symbols: 'Archmage Finja! The Seven Data Shards of Euler have been scattered by the Shadow Compiler. Only pure mathematics can restore the balance!'",
                action: "Accept the quest"
            },
            {
                title: "ğŸ•µï¸ Investigation Begins",
                text: "Your team spreads across the plaza, detecting traces of algorithmic corruption. The first Data Shard pulses nearby, but it's protected by an ancient Prime Lock that requires mathematical wisdom to open.",
                action: "Approach the Prime Lock"
            }
        ];

        const characterInfo = {
            finja: "ğŸ‘‘ As the legendary Archmage of Mathematics, you command respect throughout New Cognitia. Your theorem compass glows brighter in the presence of pure mathematical truth.",
            thomas: "ğŸ”® Thomas specializes in data enchantments, able to see the hidden patterns in corrupted algorithms. His crystal ball shows swirling probability distributions.",
            marvin: "ğŸµ The Algorithm Bard's songs can literally debug code and boost team morale. His lute is strung with fiber optic cables that pulse with data.",
            sven: "ğŸ›¡ï¸ A noble protector of secure systems, Sven's silver armor bears the emblem of the Cryptographic Order. His presence strengthens all defensive protocols.",
            dirk: "âš”ï¸ The Firewall Guardian's dark armor is inscribed with protective runes. He wields a two-handed sword that can slice through the most stubborn malware.",
            hiromi: "ğŸ¥· Master of stealth and system infiltration, Hiromi can slip through network vulnerabilities undetected. Her daggers are USB keys with infinite storage.",
            alex: "ğŸ§™ The Machine Learning Sage's neural networks can predict algorithmic behavior with uncanny accuracy. His robes shimmer with artificial intelligence.",
            sebastian: "ğŸª“ A fierce defender of data integrity, Sebastian's massive battle axe has cleaved through countless database corruptions. He never loses a single record.",
            moritz: "ğŸ¹ The Network Ranger's arrows always find the fastest path through any network topology. His elven heritage grants him perfect packet routing abilities."
        };

        function createSteamParticles() {
            const container = document.getElementById('steamContainer');
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'steam-particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 4 + 's';
                    container.appendChild(particle);

                    setTimeout(() => {
                        particle.remove();
                    }, 4000);
                }, Math.random() * 2000);
            }
        }

        function typeWriter(text, element, speed = 50, callback) {
            element.innerHTML = '';
            element.style.borderRight = '2px solid #d4af37';
            let i = 0;
            const timer = setInterval(() => {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                    element.style.borderRight = 'none';
                    if (callback) callback();
                }
            }, speed);
        }

        function updateProgress(percentage) {
            document.getElementById('storyProgress').style.width = percentage + '%';
        }

        function beginChapter() {
            gameState.storyPhase = 0;
            showNextStoryPhase();
        }

        function showNextStoryPhase() {
            if (gameState.storyPhase < storyPhases.length) {
                const phase = storyPhases[gameState.storyPhase];
                const container = document.getElementById('storyContainer');

                container.innerHTML = `
                    <div class="story-section fade-in">
                        <h3 style="color: #ffd700; margin-bottom: 15px;">${phase.title}</h3>
                        <div id="narrativeText">${phase.text}</div>
                        <button class="action-btn" onclick="continueStory()" style="margin-top: 15px; width: 100%;">
                            ${phase.action}
                        </button>
                    </div>
                `;

                updateProgress((gameState.storyPhase + 1) / storyPhases.length * 60);
                gameState.storyPhase++;
            } else {
                showPrimeLockPuzzle();
            }
        }

        function continueStory() {
            showNextStoryPhase();
        }

        function showPrimeLockPuzzle() {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-section">
                    <h3 style="color: #da70d6; margin-bottom: 15px;">âˆ The Limit Lock of Euler</h3>
                    <p>Before you stands an ancient mechanism covered in calculus symbols and infinite series. Steam hisses from bronze pipes as gears inscribed with Taylor polynomials slowly rotate. A crystalline voice echoes from within:</p>

                    <div class="team-dialogue">
                        <div class="dialogue-speaker">ğŸ”® The Prime Lock Guardian:</div>
                        "Archmage Finja, to claim the first Data Shard, you must prove your mastery of advanced mathematical analysis. Before you lies the Limit Lock of Euler - solve this elegant challenge:"
                        <br><br>
                        <div style="text-align: center; font-family: 'Times New Roman', serif; font-size: 1.2em; color: #da70d6; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            lim<sub>xâ†’0</sub> <span style="font-size: 1.4em;">(sin(x) - x cos(x)) / xÂ³</span>
                        </div>
                        "Speak the true value of this limit, and mathematical harmony shall be restored!"
                    </div>

                    <p style="color: #daa520; font-style: italic;">The lock awaits your answer. Your team stands ready to assist...</p>
                </div>
            `;

            document.getElementById('puzzleBox').classList.remove('hidden');
            document.getElementById('puzzleText').innerHTML =
                "<strong>The Limit Lock Challenge:</strong><br><br>" +
                "<div style='text-align: center; font-family: \"Times New Roman\", serif; font-size: 1.3em; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 8px; margin: 15px 0;'>" +
                "lim<sub>xâ†’0</sub> <span style='font-size: 1.5em;'>(sin(x) - x cos(x)) / xÂ³</span>" +
                "</div>" +
                "<em>Find the exact value of this limit. The ancient mechanisms require precision to the nearest simple fraction.</em><br><br>" +
                "<small style='color: #daa520;'>ğŸ’¡ Hint: Consider Taylor series expansions or L'HÃ´pital's rule...</small>";

            updateProgress(70);
        }

        function checkPuzzle() {
            const answer = document.getElementById('puzzleInput').value.trim().toLowerCase();

            // Accept various forms of 1/3
            const correctAnswers = ["1/3", "0.333", "0.3333", "1 / 3", "one third", "0.33333"];
            const isCorrect = correctAnswers.some(correct =>
                answer === correct ||
                (answer.includes("1/3")) ||
                (parseFloat(answer) && Math.abs(parseFloat(answer) - 1/3) < 0.001)
            );

            if (isCorrect) {
                solvePuzzle();
            } else {
                gameState.hintsUsed++;
                showHint();
            }
        }

        function showHint() {
            const hints = [
                "Thomas whispers: 'Try expanding sin(x) and cos(x) using their Taylor series around x = 0...'",
                "Alex's neural networks pulse: 'sin(x) = x - xÂ³/6 + xâµ/120 - ..., and cos(x) = 1 - xÂ²/2 + xâ´/24 - ...'",
                "Marvin sings mathematically: 'ğŸµ Substitute and simplify, the xÂ³ terms will clarify! The coefficient of xÂ³ in the numerator expansion is your key! ğŸµ'"
            ];

            const hintIndex = Math.min(gameState.hintsUsed - 1, hints.length - 1);
            document.getElementById('hintText').innerHTML = hints[hintIndex];
            document.getElementById('hintSection').classList.remove('hidden');
        }

        function solvePuzzle() {
            gameState.puzzleSolved = true;
            updateProgress(100);

            // Save Chapter 1 completion to local storage
            localStorage.setItem('chapter1_completed', 'true');
            localStorage.setItem('game_progress', 'chapter2_unlocked'); // Can be used for more complex save systems

            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-section celebration">
                    <h3 style="color: #90EE90; margin-bottom: 15px;">ğŸ‰ VICTORY! The Prime Lock Yields!</h3>

                    <p style="color: #90EE90;">Brilliant! The ancient mechanism recognizes your mathematical mastery! Steam hisses as bronze gears align perfectly, and the First Data Shard of Euler emerges, glowing with pure mathematical energy!</p>

                    <div class="team-dialogue">
                        <div class="dialogue-speaker">ğŸ”® Thomas (excited):</div>
                        "Magnificent, Finja! The limit evaluates to exactly 1/3! Your mastery of advanced calculus has unlocked the shard's mathematical essence!"
                    </div>

                    <div class="team-dialogue">
                        <div class="dialogue-speaker">ğŸµ Marvin (singing triumphantly):</div>
                        "ğŸµ One-third is the key, calculus sets us free! Taylor series divine, limit solutions shine! ğŸµ"
                    </div>

                    <div class="team-dialogue">
                        <div class="dialogue-speaker">ğŸ§™ Alex (impressed):</div>
                        "Extraordinary! The way you handled that indeterminate form shows true mathematical sophistication. The corruption trembles before such analytical prowess!"
                    </div>

                    <p style="color: #ffd700; font-weight: bold; text-align: center; margin-top: 20px;">
                        â­ Chapter I Complete! The adventure continues... â­
                    </p>

                    <button class="action-btn" onclick="showChapterSummary()" style="margin-top: 20px; width: 100%; background: linear-gradient(45deg, #228b22, #32cd32);">
                        ğŸ† View Chapter Summary
                    </button>
                    <button class="action-btn" onclick="window.location.href='chapter_select.html'" style="margin-top: 10px; width: 100%; background: linear-gradient(45deg, #4b0082, #8a2be2);">
                        â¡ï¸ Proceed to Chapter Select
                    </button>
                </div>
            `;

            document.getElementById('puzzleBox').classList.add('hidden');
            updateChapterStatus();
            celebrateVictory();
        }

        function celebrateVictory() {
            // Add celebration effects
            document.body.style.animation = 'celebrate 2s ease-in-out';

            // Update team status
            const characters = document.querySelectorAll('.character');
            characters.forEach(char => {
                char.style.background = 'rgba(50, 205, 50, 0.3)';
                setTimeout(() => {
                    char.style.background = 'rgba(139, 69, 19, 0.4)';
                }, 3000);
            });

            // Create celebration particles
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    createCelebrationParticle();
                }, i * 50);
            }
        }

        function createCelebrationParticle() {
            const particle = document.createElement('div');
            particle.innerHTML = ['â­', 'âœ¨', 'ğŸ‰', 'ğŸ’«', 'ğŸŒŸ'][Math.floor(Math.random() * 5)];
            particle.style.position = 'fixed';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = '100%';
            particle.style.fontSize = '2em';
            particle.style.zIndex = '1000';
            particle.style.pointerEvents = 'none';
            particle.style.animation = 'steam-rise 3s ease-out forwards';

            document.body.appendChild(particle);

            setTimeout(() => {
                particle.remove();
            }, 3000);
        }

        function updateChapterStatus() {
            document.getElementById('chapterStatus').innerHTML = `
                <div>ğŸ—ºï¸ Location: Probability Plaza</div>
                <div style="color: #90EE90;">âœ… Objective: Investigation Complete!</div>
                <div style="color: #90EE90;">ğŸ” Clues Found: 3/3</div>
                <div style="color: #90EE90;">ğŸ’ Data Shards: 1/1</div>
                <div style="color: #90EE90;">âœ¨ Team Morale: TRIUMPHANT!</div>
                <div style="color: #ffd700; margin-top: 10px;">ğŸ† Chapter I: COMPLETED!</div>
            `;
        }

        function showChapterSummary() {
            alert(`
ğŸ† CHAPTER I COMPLETE! ğŸ†

ğŸ“Š Performance Summary:
âœ… Limit Lock Challenge: SOLVED
âœ… First Data Shard: RECOVERED
âœ… Team Morale: EXCELLENT
${gameState.hintsUsed > 0 ? `ğŸ’¡ Hints Used: ${gameState.hintsUsed}` : 'ğŸŒŸ Perfect Score - No Hints Needed!'}

ğŸ­ Team Status:
All members are inspired by your advanced mathematical analysis!

ğŸ“œ Story Progress:
The corruption in Probability Plaza has been cleansed through superior calculus, but six more Data Shards await recovery across New Cognitia. The Shadow Compiler's influence grows stronger with each passing hour...

ğŸ¯ Next Destination:
The Recursive Clocktower, where the Fibonacci Engine has jammed!

Your mathematical adventure awaits! ğŸŒŸ
            `);
        }

        function showTeamStatus() {
            const status = `
ğŸ‘¥ TEAM STATUS REPORT ğŸ‘¥

ğŸ­ Current Location: Probability Plaza
âš¡ Overall Morale: ${gameState.puzzleSolved ? 'TRIUMPHANT!' : 'Ready for action!'}

Team Members:
ğŸ‘‘ Finja (You) - Mathematical leadership is inspiring everyone
ğŸ”® Thomas - Data enchantments are detecting corruption patterns
ğŸµ Marvin - Composing victory songs to boost team spirit
ğŸ›¡ï¸ Sven - Maintaining plaza security perimeter
âš”ï¸ Dirk - Firewall systems operating at 100% efficiency
ğŸ¥· Hiromi - Network reconnaissance complete
ğŸ§™ Alex - AI patterns suggest optimal strategy paths
ğŸª“ Sebastian - Database integrity holding strong
ğŸ¹ Moritz - Communication networks fully operational

ğŸ’ª All team members are healthy and ready for the next challenge!
            `;
            alert(status);
        }

        function examineEnvironment() {
            gameState.cluesFound = Math.min(gameState.cluesFound + 1, 3);

            const clues = [
                "ğŸ” You examine the plaza's steam pipes and discover corrupted data fragments with strange algorithmic signatures...",
                "ğŸ” The probability fountains show impossible statistical distributions - clearly the work of the Shadow Compiler!",
                "ğŸ” Ancient mathematical inscriptions on the plaza stones begin to glow, pointing toward the location of the First Data Shard!"
            ];

            const clueIndex = gameState.cluesFound - 1;
            alert(clues[clueIndex]);

            updateChapterProgress();
        }

        function showInventory() {
            alert(`
ğŸ’ FINJA'S MATHEMATICAL ARSENAL ğŸ’

ğŸ”§ Equipment Status:
âœ… Analytical Engine Tablet - Fully charged
âœ… Theorem Compass - Pointing toward mathematical truth
âœ… Data Crystal Resonator - Detecting corruption signatures
âœ… Team Communication Device - All channels clear
âœ… Euler's Memorial Badge - Granting access to sacred mathematics

${gameState.puzzleSolved ? 'ğŸ’ DATA SHARD ACQUIRED: Limit Shard of Euler' : 'ğŸ” Searching for Data Shards...'}

ğŸ’¡ Special Abilities Available:
â€¢ Mathematical Insight (unlimited uses)
â€¢ Team Consultation (ask teammates for hints)
â€¢ Environmental Analysis (discover hidden clues)
â€¢ Algorithm Debugging (cleanse corrupted code)
            `);
        }



        function updateChapterProgress() {
            const statusDiv = document.getElementById('chapterStatus');
            statusDiv.innerHTML = `
                <div>ğŸ—ºï¸ Location: Probability Plaza</div>
                <div>ğŸ¯ Objective: ${gameState.puzzleSolved ? 'COMPLETE!' : 'Investigate corruption'}</div>
                <div style="color: ${gameState.cluesFound === 3 ? '#90EE90' : '#ffd700'};">ğŸ” Clues Found: ${gameState.cluesFound}/3</div>
                <div style="color: ${gameState.puzzleSolved ? '#90EE90' : '#ffd700'};">ğŸ’ Data Shards: ${gameState.puzzleSolved ? '1' : '0'}/1</div>
                <div style="color: #90EE90;">âœ¨ Team Morale: ${gameState.puzzleSolved ? 'TRIUMPHANT!' : 'Excellent!'}</div>
            `;
        }

        // Initialize the game
        window.onload = function() {
            createSteamParticles();

            // Continue creating steam particles periodically
            setInterval(createSteamParticles, 8000);

            // Hide the Begin Chapter button since we'll start automatically
            const beginButton = document.querySelector('.action-btn[onclick="beginChapter()"]');
            if (beginButton) {
                beginButton.style.display = 'none';
            }

            // Start the chapter automatically
            beginChapter();

            // Add some atmospheric gear rotation
            setInterval(() => {
                const gear = document.querySelector('.gear-animation');
                if (gear) {
                    // Update gear color logic for realism (optional)
                    // gear.style.color = Math.random() > 0.5 ? '#ffd700' : '#d4af37';
                }
            }, 3000);
        };

        // Add Enter key support for puzzle input
        document.addEventListener('DOMContentLoaded', function() {
            const puzzleInput = document.getElementById('puzzleInput');
            if (puzzleInput) {
                puzzleInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkPuzzle();
                    }
                });
            }
        });
    </script>

    <!-- Character Modal -->
    <div id="characterModal" class="character-modal" onclick="closeCharacterModal()">
        <div class="character-modal-content" onclick="event.stopPropagation()">
            <img id="modalCharacterImage" src="" alt="Character Image">
            <div class="character-name" id="modalCharacterName"></div>
            <div class="character-class" id="modalCharacterClass"></div>
            <div class="character-description" id="modalCharacterDescription"></div>
            <button class="action-btn" style="background: linear-gradient(45deg, #8b4513, #a0522d);" onclick="closeCharacterModal()">
                Close
            </button>
        </div>
    </div>

    <script>
        // Character data
        const characters = {
            finja: {
                name: 'ğŸ‘‘ Finja',
                class: 'Archmage of Mathematics',
                description: 'As the legendary Archmage of Mathematics, you command respect throughout New Cognitia. Your theorem compass glows brighter in the presence of pure mathematical truth.',
                image: 'images/finja.png'
            },
            thomas: {
                name: 'ğŸ”® Thomas',
                class: 'Data Enchanter',
                description: 'Thomas specializes in data enchantments, able to see the hidden patterns in corrupted algorithms. His crystal ball shows swirling probability distributions.',
                image: 'images/thomas.png'
            },
            marvin: {
                name: 'ğŸµ Marvin',
                class: 'Algorithm Bard',
                description: 'The Algorithm Bard\'s songs can literally debug code and boost team morale. His lute is strung with fiber optic cables that pulse with data.',
                image: 'images/marvin.png'
            },
            sven: {
                name: 'ğŸ›¡ï¸ Sven',
                class: 'Security Paladin',
                description: 'A noble protector of secure systems, Sven\'s silver armor bears the emblem of the Cryptographic Order. His presence strengthens all defensive protocols.',
                image: 'images/sven.png'
            },
            dirk: {
                name: 'âš”ï¸ Dirk',
                class: 'Firewall Guardian',
                description: 'The Firewall Guardian\'s dark armor is inscribed with protective runes. He wields a two-handed sword that can slice through the most stubborn malware.',
                image: 'images/dirk.png'
            },
            hiromi: {
                name: 'ğŸ¥· Hiromi',
                class: 'System Infiltrator',
                description: 'Master of stealth and system infiltration, Hiromi can slip through network vulnerabilities undetected. Her daggers are USB keys with infinite storage.',
                image: 'images/hiromi.png'
            },
            alex: {
                name: 'ğŸ§™ Alex',
                class: 'Machine Learning Sage',
                description: 'The Machine Learning Sage\'s neural networks can predict algorithmic behavior with uncanny accuracy. His robes shimmer with artificial intelligence.',
                image: 'images/alex.png'
            },
            sebastian: {
                name: 'ğŸª“ Sebastian',
                class: 'Database Warrior',
                description: 'A fierce defender of data integrity, Sebastian\'s massive battle axe has cleaved through countless database corruptions. He never loses a single record.',
                image: 'images/sebastian.png'
            },
            moritz: {
                name: 'ğŸ¹ Moritz',
                class: 'Network Ranger',
                description: 'The Network Ranger\'s arrows always find the fastest path through any network topology. His elven heritage grants him perfect packet routing abilities.',
                image: 'images/moritz.png'
            }
        };

        function showCharacterInfo(characterId) {
            const character = characters[characterId];
            if (!character) return;

            const modal = document.getElementById('characterModal');
            document.getElementById('modalCharacterName').textContent = character.name;
            document.getElementById('modalCharacterClass').textContent = character.class;
            document.getElementById('modalCharacterDescription').textContent = character.description;
            
            const img = document.getElementById('modalCharacterImage');
            img.src = character.image;
            img.alt = `${character.name} - ${character.class}`;
            
            // Show the modal and prevent body scrolling
            modal.classList.add('active');
            document.body.classList.add('modal-open');
            
            // Focus the modal for keyboard navigation
            modal.focus();
        }

        function closeCharacterModal() {
            const modal = document.getElementById('characterModal');
            modal.classList.remove('active');
            document.body.classList.remove('modal-open');
        }

        // Close modal when pressing Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeCharacterModal();
            }
        });
    </script>
</body>
</html>